import React from "react";
import { Link, NavLink, useNavigate } from "react-router-dom";
import {
  FiHome,
  FiList,
  FiClock,
  FiFileText,
  FiUsers,
  FiBox,
  FiMessageCircle,
  FiLogOut,
} from "react-icons/fi";

const navItems = [
  { label: "Home", icon: <FiHome />, path: "/admin" },
  { label: "Order", icon: <FiList />, path: "/admin/order" },
  { label: "History", icon: <FiClock />, path: "/admin/history" },
  { label: "Bills", icon: <FiFileText />, path: "/admin/bills" },
  { label: "Users", icon: <FiUsers />, path: "/admin/users" },
  { label: "Products", icon: <FiBox />, path: "/admin/products" },
  { label: "Ticket", icon: <FiMessageCircle />, path: "/admin/ticket" },
];

function Sidebar({ onLogout }) {
  const navigate = useNavigate();
  return (
    <>
      {/* Desktop/Tablet Sidebar */}
      <aside className="flex flex-col justify-between hidden w-64 h-screen max-h-screen p-4 overflow-y-auto bg-white border-r md:flex">
        <div>
          <div className="flex items-center justify-center gap-2 p-2 py-4 mb-8">
            <Link to="/admin" className="flex-shrink-0">
              <svg
                width="100"
                height="32"
                viewBox="0 0 100 32"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M32.045 1.985C32.6983 2.07833 33.1417 2.27667 33.375 2.58C33.6317 2.88333 33.76 3.28 33.76 3.77C33.76 5.38 32.8967 6.12666 31.17 6.01L29.945 5.905C28.5683 5.78833 27.1917 5.695 25.815 5.625C24.4617 5.555 23.0383 5.52 21.545 5.52H19.97C19.69 8.97333 19.3983 12.1233 19.095 14.97L25.115 14.865C25.9783 14.865 26.55 15.0167 26.83 15.32C27.1333 15.6233 27.285 16.0317 27.285 16.545C27.285 17.3383 27.0517 17.9683 26.585 18.435C26.1183 18.8783 25.4533 19.1 24.59 19.1H18.605L18.395 20.605C17.905 24.455 16.855 27.1967 15.245 28.83C13.6583 30.4633 11.465 31.28 8.665 31.28C7.07833 31.28 5.62 30.9417 4.29 30.265C2.96 29.565 1.98 28.725 1.35 27.745C1.09333 27.3483 0.965 26.87 0.965 26.31C0.965 25.75 1.09333 25.26 1.35 24.84C1.63 24.42 1.96833 24.21 2.365 24.21C2.645 24.21 2.91333 24.3033 3.17 24.49C3.45 24.6767 3.8 25.0383 4.22 25.575C5.34 27.045 6.72833 27.78 8.385 27.78C9.715 27.78 10.8233 27.2433 11.71 26.17C12.62 25.0733 13.2033 23.3583 13.46 21.025L13.67 19.1H11.99C11.4533 19.1 10.9867 18.9483 10.59 18.645C10.2167 18.3417 10.03 17.91 10.03 17.35C10.03 16.6267 10.2167 16.0783 10.59 15.705C10.9633 15.3083 11.5117 15.11 12.235 15.11C12.8883 15.11 13.53 15.0983 14.16 15.075C14.44 12.5083 14.7433 9.39333 15.07 5.73C12.55 5.96333 10.7767 6.37167 9.75 6.955C8.72333 7.53833 8.21 8.40166 8.21 9.545C8.21 10.3383 8.44333 11.0967 8.91 11.82C9.05 12.03 9.12 12.24 9.12 12.45C9.12 12.87 8.88667 13.2433 8.42 13.57C7.95333 13.8733 7.42833 14.025 6.845 14.025C6.215 14.025 5.67833 13.8383 5.235 13.465C4.955 13.2317 4.68667 12.7533 4.43 12.03C4.17333 11.3067 4.045 10.5017 4.045 9.615C4.045 6.72167 5.52667 4.62167 8.49 3.315C11.4767 2.00833 15.8283 1.355 21.545 1.355C25.5117 1.355 29.0117 1.565 32.045 1.985ZM42.8652 23.195C43.1685 23.195 43.4019 23.335 43.5652 23.615C43.7519 23.895 43.8452 24.28 43.8452 24.77C43.8452 25.7033 43.6235 26.4267 43.1802 26.94C42.3169 27.99 41.0919 28.9583 39.5052 29.845C37.9419 30.7317 36.2619 31.175 34.4652 31.175C32.0152 31.175 30.1135 30.51 28.7602 29.18C27.4069 27.85 26.7302 26.03 26.7302 23.72C26.7302 22.11 27.0685 20.6167 27.7452 19.24C28.4219 17.84 29.3552 16.7317 30.5452 15.915C31.7585 15.0983 33.1235 14.69 34.6402 14.69C35.9935 14.69 37.0785 15.0983 37.8952 15.915C38.7119 16.7083 39.1202 17.7933 39.1202 19.17C39.1202 20.78 38.5369 22.1683 37.3702 23.335C36.2269 24.4783 34.2785 25.3883 31.5252 26.065C32.1085 27.1383 33.2169 27.675 34.8502 27.675C35.9002 27.675 37.0902 27.3133 38.4202 26.59C39.7735 25.8433 40.9402 24.875 41.9202 23.685C42.2002 23.3583 42.5152 23.195 42.8652 23.195ZM34.0452 18.12C33.1819 18.12 32.4469 18.6217 31.8402 19.625C31.2569 20.6283 30.9652 21.8417 30.9652 23.265V23.335C32.3419 23.0083 33.4269 22.5183 34.2202 21.865C35.0135 21.2117 35.4102 20.4533 35.4102 19.59C35.4102 19.1467 35.2819 18.7967 35.0252 18.54C34.7919 18.26 34.4652 18.12 34.0452 18.12ZM45.1295 31.175C43.6829 31.175 42.5279 30.65 41.6645 29.6C40.8012 28.55 40.3695 27.1733 40.3695 25.47C40.3695 23.6033 40.8012 21.8417 41.6645 20.185C42.5279 18.505 43.6712 17.1633 45.0945 16.16C46.5412 15.1333 48.0695 14.62 49.6795 14.62C50.1929 14.62 50.5312 14.725 50.6945 14.935C50.8812 15.1217 51.0329 15.4717 51.1495 15.985C51.6395 15.8917 52.1529 15.845 52.6895 15.845C53.8329 15.845 54.4045 16.2533 54.4045 17.07C54.4045 17.56 54.2295 18.7267 53.8795 20.57C53.3429 23.2533 53.0745 25.12 53.0745 26.17C53.0745 26.52 53.1562 26.8 53.3195 27.01C53.5062 27.22 53.7395 27.325 54.0195 27.325C54.4629 27.325 54.9995 27.045 55.6295 26.485C56.2595 25.9017 57.1112 24.9683 58.1845 23.685C58.4645 23.3583 58.7795 23.195 59.1295 23.195C59.4329 23.195 59.6662 23.335 59.8295 23.615C60.0162 23.895 60.1095 24.28 60.1095 24.77C60.1095 25.7033 59.8879 26.4267 59.4445 26.94C58.4879 28.13 57.4729 29.1333 56.3995 29.95C55.3262 30.7667 54.2879 31.175 53.2845 31.175C52.5145 31.175 51.8029 30.9183 51.1495 30.405C50.5195 29.8683 50.0412 29.145 49.7145 28.235C48.5012 30.195 46.9729 31.175 45.1295 31.175ZM46.3895 27.64C46.9029 27.64 47.3929 27.3367 47.8595 26.73C48.3262 26.1233 48.6645 25.3183 48.8745 24.315L50.1695 17.875C49.1895 17.8983 48.2795 18.2717 47.4395 18.995C46.6229 19.695 45.9695 20.6283 45.4795 21.795C44.9895 22.9617 44.7445 24.1983 44.7445 25.505C44.7445 26.2283 44.8845 26.765 45.1645 27.115C45.4679 27.465 45.8762 27.64 46.3895 27.64ZM63.775 31.945C62.5616 31.945 61.6283 31.665 60.975 31.105C60.345 30.545 60.03 29.915 60.03 29.215C60.03 28.6083 60.2516 28.0833 60.695 27.64C61.1383 27.1967 61.7916 26.975 62.655 26.975C62.9583 26.975 63.3083 27.01 63.705 27.08C64.125 27.1267 64.44 27.1617 64.65 27.185C64.6266 26.5783 64.4866 26.0067 64.23 25.47C63.9966 24.9333 63.6933 24.42 63.32 23.93C62.9466 23.4167 62.5966 22.9733 62.27 22.6C61.5466 23.9767 60.8233 25.12 60.1 26.03C59.4 26.94 58.63 27.8033 57.79 28.62C57.37 29.04 56.9266 29.25 56.46 29.25C56.0866 29.25 55.7833 29.1217 55.55 28.865C55.3166 28.585 55.2 28.2467 55.2 27.85C55.2 27.3833 55.3633 26.9517 55.69 26.555L56.145 25.995C57.4283 24.4083 58.3966 23.1017 59.05 22.075C59.4466 21.3983 59.9133 20.5 60.45 19.38C60.9866 18.2367 61.5116 17.0583 62.025 15.845C62.4683 14.8183 63.39 14.305 64.79 14.305C65.4433 14.305 65.8983 14.3633 66.155 14.48C66.4116 14.5967 66.54 14.7833 66.54 15.04C66.54 15.18 66.4933 15.4017 66.4 15.705C66.3066 16.0083 66.1783 16.3117 66.015 16.615C65.595 17.455 65.385 18.1667 65.385 18.75C65.385 19.1 65.5016 19.485 65.735 19.905C65.9916 20.325 66.3766 20.85 66.89 21.48C67.6366 22.46 68.1966 23.3 68.57 24C68.9666 24.6767 69.165 25.4233 69.165 26.24C69.165 26.4733 69.1416 26.8 69.095 27.22C70.2383 26.7767 71.58 25.5983 73.12 23.685C73.4 23.3583 73.715 23.195 74.065 23.195C74.3683 23.195 74.6016 23.335 74.765 23.615C74.9516 23.895 75.045 24.28 75.045 24.77C75.045 25.6567 74.8233 26.38 74.38 26.94C73.2133 28.3867 72.0933 29.3783 71.02 29.915C69.97 30.4283 68.6633 30.7083 67.1 30.755C66.1666 31.5483 65.0583 31.945 63.775 31.945ZM87.8115 23.195C88.1148 23.195 88.3482 23.335 88.5115 23.615C88.6982 23.895 88.7915 24.28 88.7915 24.77C88.7915 25.7033 88.5698 26.4267 88.1265 26.94C87.1232 28.1767 86.0265 29.1917 84.8365 29.985C83.6465 30.7783 82.2815 31.175 80.7415 31.175C75.9815 31.175 73.6015 27.8267 73.6015 21.13C73.6015 20.1033 73.6365 19.065 73.7065 18.015H72.3415C71.6415 18.015 71.1632 17.8867 70.9065 17.63C70.6732 17.3733 70.5565 16.965 70.5565 16.405C70.5565 15.0983 71.0815 14.445 72.1315 14.445H74.1265C74.5232 11.8783 75.1298 9.53333 75.9465 7.41C76.7632 5.28667 77.7432 3.595 78.8865 2.335C80.0532 1.075 81.3015 0.444999 82.6315 0.444999C83.6115 0.444999 84.3815 0.876666 84.9415 1.74C85.5015 2.60333 85.7815 3.68833 85.7815 4.995C85.7815 8.61167 84.2648 11.7617 81.2315 14.445H85.1515C85.5248 14.445 85.7932 14.5267 85.9565 14.69C86.1198 14.8533 86.2015 15.1567 86.2015 15.6C86.2015 17.21 84.8832 18.015 82.2465 18.015H77.9765C77.9298 19.1817 77.9065 20.0917 77.9065 20.745C77.9065 23.1717 78.1865 24.875 78.7465 25.855C79.3298 26.835 80.2398 27.325 81.4765 27.325C82.4798 27.325 83.3665 27.0217 84.1365 26.415C84.9065 25.8083 85.8165 24.8983 86.8665 23.685C87.1465 23.3583 87.4615 23.195 87.8115 23.195ZM81.6865 3.805C81.3365 3.805 80.9398 4.24833 80.4965 5.135C80.0765 5.99833 79.6682 7.21167 79.2715 8.775C78.8982 10.315 78.5832 12.03 78.3265 13.92C79.7032 12.73 80.7298 11.4 81.4065 9.93C82.1065 8.43667 82.4565 7.08333 82.4565 5.87C82.4565 4.49333 82.1998 3.805 81.6865 3.805ZM91.8567 31.175C90.4801 31.175 89.3017 30.8367 88.3217 30.16C87.3651 29.46 86.6417 28.55 86.1517 27.43C85.6617 26.31 85.4167 25.1083 85.4167 23.825C85.4167 22.0517 85.7434 20.4767 86.3967 19.1C87.0734 17.7 87.9834 16.615 89.1267 15.845C90.2701 15.0517 91.5534 14.655 92.9767 14.655C94.3534 14.655 95.5317 15.005 96.5117 15.705C97.4917 16.3817 98.2267 17.28 98.7167 18.4C99.2067 19.52 99.4517 20.7217 99.4517 22.005C99.4517 23.7783 99.1134 25.365 98.4367 26.765C97.7601 28.1417 96.8384 29.2267 95.6717 30.02C94.5284 30.79 93.2567 31.175 91.8567 31.175ZM92.2417 27.395C93.0351 27.395 93.7001 26.9633 94.2367 26.1C94.7967 25.2367 95.0767 23.9767 95.0767 22.32C95.0767 21.0367 94.8434 20.0683 94.3767 19.415C93.9101 18.7617 93.3501 18.435 92.6967 18.435C91.8567 18.435 91.1567 18.8667 90.5967 19.73C90.0601 20.57 89.7917 21.83 89.7917 23.51C89.7917 24.84 90.0251 25.82 90.4917 26.45C90.9584 27.08 91.5417 27.395 92.2417 27.395Z"
                  fill="black"
                />
              </svg>
            </Link>
          </div>
          <nav className="flex flex-col gap-2">
            {navItems.map((item) => (
              <NavLink
                key={item.label}
                to={item.path}
                className={({ isActive }) =>
                  `flex items-center gap-3 px-4 py-2 rounded-lg transition font-medium text-base ${
                    isActive
                      ? "bg-indigo-600 text-white"
                      : "text-gray-700 hover:bg-gray-100"
                  }`
                }
                end={item.path === "/admin"}
              >
                {item.icon}
                {item.label}
              </NavLink>
            ))}
          </nav>
        </div>
        <button
          onClick={onLogout}
          className="flex items-center gap-3 px-4 py-2 pt-4 mt-8 text-base font-medium text-gray-700 transition border-t rounded-lg hover:bg-gray-100"
        >
          <FiLogOut /> Logout
        </button>
      </aside>
      {/* Mobile Bottom Navigation */}
      <nav className="fixed bottom-0 left-0 right-0 z-50 flex bg-white border-t shadow-lg md:hidden">
        {navItems.map((item) => (
          <NavLink
            key={item.label}
            to={item.path}
            className={({ isActive }) =>
              `flex flex-col items-center justify-center flex-1 py-2 text-xs font-medium transition ${
                isActive
                  ? "text-indigo-600"
                  : "text-gray-600 hover:text-indigo-500"
              }`
            }
            end={item.path === "/admin"}
          >
            <span className="text-xl">{item.icon}</span>
            <span>{item.label}</span>
          </NavLink>
        ))}
      </nav>
    </>
  );
}

export default Sidebar;
